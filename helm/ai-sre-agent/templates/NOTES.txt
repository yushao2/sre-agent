ğŸš€ AI SRE Agent deployed!

{{- if .Values.api.enabled }}

ğŸ“¡ API Server:
{{- if .Values.api.ingress.enabled }}
{{- range .Values.api.ingress.hosts }}
  https://{{ .host }}
{{- end }}
{{- else }}
  kubectl port-forward svc/{{ include "ai-sre-agent.fullname" . }}-api {{ .Values.api.service.port }}:{{ .Values.api.service.port }}
  http://localhost:{{ .Values.api.service.port }}
{{- end }}

  API Docs: /docs
  Health:   /health
{{- end }}

{{- if .Values.worker.enabled }}

âš™ï¸  Celery Workers: {{ .Values.worker.replicaCount }} replicas (concurrency={{ .Values.worker.concurrency }})
{{- end }}

ğŸ“¦ Components:
  âœ“ API Server
  âœ“ Celery Workers
{{- if .Values.beat.enabled }}
  âœ“ Celery Beat (scheduler)
{{- end }}
{{- if .Values.mcpServers.jira.enabled }}
  âœ“ MCP Jira Server
{{- end }}
{{- if .Values.mcpServers.confluence.enabled }}
  âœ“ MCP Confluence Server
{{- end }}
{{- if .Values.mcpServers.gitlab.enabled }}
  âœ“ MCP GitLab Server
{{- end }}
{{- if .Values.redis.enabled }}
  âœ“ Redis (subchart)
{{- else }}
  â†’ External Redis: {{ .Values.externalRedis.host }}
{{- end }}
{{- if .Values.postgresql.enabled }}
  âœ“ PostgreSQL (subchart)
{{- else if .Values.externalPostgresql.host }}
  â†’ External PostgreSQL: {{ .Values.externalPostgresql.host }}
{{- end }}

ğŸ“‹ Commands:

  # Check pods
  kubectl get pods -l app.kubernetes.io/instance={{ .Release.Name }}

  # API logs
  kubectl logs -l app.kubernetes.io/component=api -f

  # Worker logs
  kubectl logs -l app.kubernetes.io/component=worker -f

  # Test health
  curl http://localhost:8000/health

{{- if not .Values.secrets.existingSecret }}
{{- if not .Values.secrets.create }}

âš ï¸  Create a secret with your credentials:

  kubectl create secret generic {{ include "ai-sre-agent.fullname" . }}-secrets \
    --from-literal=ANTHROPIC_API_KEY=your-key \
    --from-literal=JIRA_URL=https://your.atlassian.net \
    --from-literal=JIRA_USERNAME=email@example.com \
    --from-literal=JIRA_API_TOKEN=your-token \
    --from-literal=CONFLUENCE_URL=https://your.atlassian.net/wiki \
    --from-literal=CONFLUENCE_USERNAME=email@example.com \
    --from-literal=CONFLUENCE_API_TOKEN=your-token \
    --from-literal=GITLAB_URL=https://gitlab.com \
    --from-literal=GITLAB_TOKEN=your-token

{{- end }}
{{- end }}
